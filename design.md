# OAuth SQL System Design

## Basic Authentication (Many to Many)

provides a basic access flow to validate anyone allowed by the developer(s).

There can be many users for that system that all use the same secret, making it easier to authenticate lower level systems with small userbase.

It cannot distribute keys from itself only validate users added beforehand.
Users can be added via dashboard by the developer(s) therefore that information is not stored in the table, for security.

Has information such as

- ID (for databse)
- Username (for each person)
- pasword_hash (for each person)
- client_name (handed back to client based off username and password)
- client_secret (handed back to client based off username and password)
- expires_in (handed back with token to designate how long its valid for)

Client sends off username and password to provider then provider references the username and password hash to generate a client name and client secret used to authenticate the user. Meaning the person only has to enter there password one time then they are authenticated to the site until the time expires.

## Session/Master Authentication (One to Many)

Provides complex access flow to validate an admin user as well as have that admin assign new users.

There is a master secret that is used to generate new tokens to make new users.

Therefore, a developer can allow high level access to a few users which then assign lower level access to other users.

Has information such as

- ID (for databse)
- Entity_id (owner of the token)
- master_token (token generated by another system used to make edits to the master)
- access_token (token generated by master token to give to client to authenticate)
- role (access token has a role associated with it, it stores them here)
- expires_in (time for that access token to be valid until the user has to relog in)

Entity ID stores the owner of the master token the master token is used to make changes to the admins that have access to the system. It also has a access token and refresh token to handoff to the users to be used to generate a key to be used to authenticate themselves.

For master token ID references the token id so if that is deleted then so should the ID for that token.
